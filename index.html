<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>рдХрд┐рд╕рд╛рди рдлреЙрд░реНрдо ┬╖ рд╕рднреА рдлреАрд▓реНрдб рдЕрдирд┐рд╡рд╛рд░реНрдп</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Nirmala UI', 'Hindi', system-ui, sans-serif;
        }
        body {
            background: #def1d8;
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1.5rem;
        }
        .form-container {
            max-width: 950px;
            width: 100%;
            background: white;
            padding: 2rem 2rem 2.5rem;
            border-radius: 32px;
            box-shadow: 0 20px 35px -8px #1f4a2b;
            border: 1px solid #b8dcb0;
        }
        h1 {
            font-size: 2.1rem;
            font-weight: 700;
            color: #1c5227;
            margin: 0 0 0.1rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        h1::before {
            content: "ЁЯМ╛ЁЯЪЬ";
            font-size: 2.2rem;
        }
        .subhead {
            color: #1f6e44;
            border-left: 5px solid #5b8c5a;
            padding-left: 1.2rem;
            margin-bottom: 2rem;
            font-size: 1.2rem;
            font-weight: 400;
        }
        fieldset {
            border: 1px solid #b6d9ac;
            border-radius: 28px;
            padding: 1.8rem 2rem;
            margin-bottom: 2rem;
            background: #f8fff6;
        }
        legend {
            background: #236b3e;
            color: white;
            padding: 0.4rem 1.6rem;
            border-radius: 40px;
            font-weight: 600;
            font-size: 1.3rem;
            border: 2px solid white;
            box-shadow: 0 2px 8px rgba(0,40,0,0.2);
        }
        .section-label {
            font-weight: 600;
            color: #1e422a;
            font-size: 1.2rem;
            margin: 0 0 1rem 0;
            border-bottom: 2px dotted #a6cf9e;
            padding-bottom: 0.3rem;
        }
        .checkbox-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem 2rem;
            margin-bottom: 1.2rem;
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            min-width: 160px;
            background: #ecfbea;
            padding: 0.4rem 1rem 0.4rem 0.8rem;
            border-radius: 40px;
            border: 1px solid #a9d2a1;
        }
        .checkbox-item input[type="checkbox"] {
            width: 1.2rem;
            height: 1.2rem;
            accent-color: #1e7e4a;
            margin-right: 0.2rem;
        }
        .other-row {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.8rem;
            margin-top: 0.8rem;
            margin-left: 0.5rem;
        }
        .other-row input[type="text"],
        .other-row input[type="tel"] {
            padding: 0.6rem 1.2rem;
            border: 1px solid #98ba90;
            border-radius: 40px;
            font-size: 1rem;
            width: 280px;
            max-width: 100%;
            background: white;
        }
        .other-row input[type="text"]:focus,
        .other-row input[type="tel"]:focus {
            border-color: #1d7a41;
            outline: 2px solid #b1e0b9;
        }
        .inline-hint {
            color: #1d5730;
            font-size: 1rem;
            font-weight: 500;
            margin: 1rem 0 0.4rem;
        }
        .radio-group {
            margin: 0.8rem 0 1rem 0;
        }
        .radio-option {
            display: inline-flex;
            align-items: center;
            margin-right: 2.2rem;
            background: #e9f3e6;
            padding: 0.3rem 1.2rem;
            border-radius: 40px;
            font-size: 1.05rem;
        }
        .radio-option input[type="radio"] {
            margin-right: 0.5rem;
            accent-color: #1d7a41;
            width: 1.1rem;
            height: 1.1rem;
        }
        .help-type-group {
            background: #e1f5e1;
            padding: 1.2rem 1.8rem;
            border-radius: 32px;
            margin: 0.5rem 0 0.5rem 1.2rem;
            border-left: 5px solid #328f4e;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem 2.5rem;
        }
        .hidden {
            display: none;
        }
        .button {
            background: #1f7a4c;
            color: white;
            border: none;
            font-size: 1.4rem;
            font-weight: 600;
            padding: 1rem 2rem;
            border-radius: 60px;
            width: 100%;
            cursor: pointer;
            transition: 0.2s;
            box-shadow: 0 4px 12px #236b3e;
            border: 1px solid #166b3b;
            letter-spacing: 1px;
        }
        .button:hover {
            background: #0e5a32;
            transform: scale(1.01);
        }
        .button:disabled {
            background: #7fa885;
            cursor: not-allowed;
            box-shadow: none;
        }
        .note {
            text-align: center;
            color: #3d6e47;
            margin-top: 1.2rem;
            font-size: 0.95rem;
        }
        hr {
            border: 1px solid #c4e0be;
            margin: 1.2rem 0;
        }
        .challenge-box {
            background: #fff5e6;
            border-radius: 28px;
            padding: 1.2rem 1.8rem;
            border: 1px solid #e0cdaa;
        }
        .success-message {
            background: #d4edda;
            color: #155724;
            border-radius: 50px;
            padding: 0.8rem 1.5rem;
            margin-top: 1rem;
            text-align: center;
            font-weight: 500;
        }
        .error-message {
            background: #f8d7da;
            color: #721c24;
            border-radius: 50px;
            padding: 0.8rem 1.5rem;
            margin-top: 1rem;
            text-align: center;
            font-weight: 500;
        }
        .validation-error {
            background: #fff3cd;
            color: #856404;
            border-radius: 50px;
            padding: 0.8rem 1.5rem;
            margin-top: 1rem;
            text-align: center;
            font-weight: 500;
        }
    </style>
</head>
<body>
<div class="form-container">
    <h1>рдХрд┐рд╕рд╛рди рд╕рд╣рд╛рдпрддрд╛ рдбреЗрдЯрд╛рдмреЗрд╕</h1>
    <div class="subhead">рдмрд┐рд╣рд╛рд░ рдХреЗ рдХрд┐рд╕рд╛рдиреЛрдВ рдХреЗ рд▓рд┐рдП ┬╖ рд╕рднреА рдлреАрд▓реНрдб рдЕрдирд┐рд╡рд╛рд░реНрдп</div>

    <form id="farmerForm">
        <!-- ========== рдкрд╣рдЪрд╛рди (Farmer ID / Aadhaar + Mobile) ========= -->
        <fieldset>
            <legend>ЁЯЖФ рдХрд┐рд╕рд╛рди рдкрд╣рдЪрд╛рди</legend>
            <div class="section-label">рдХреНрдпрд╛ рдХрд┐рд╕рд╛рди рдХреЗ рдкрд╛рд╕ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рдХрд┐рд╕рд╛рди рдЖрдИрдбреА рд╣реИ?</div>
            <div class="radio-group">
                <label class="radio-option"><input type="radio" name="has_id" value="yes" id="has_id_yes"> рд╣рд╛рдБ, рдХрд┐рд╕рд╛рди рдЖрдИрдбреА рд╣реИ</label>
                <label class="radio-option"><input type="radio" name="has_id" value="no" id="has_id_no" checked> рдирд╣реАрдВ, рдЖрдзрд╛рд░ рдирдВрдмрд░ рджреЗрдВ</label>
            </div>
            <!-- рдХрд┐рд╕рд╛рди рдЖрдИрдбреА (рдпрджрд┐ рд╣рд╛рдБ) -->
            <div id="farmer_id_block" class="other-row hidden">
                <label for="farmer_id">рдХрд┐рд╕рд╛рди рдЖрдИрдбреА (рдЕрдЧрд░ рдЙрдкрд▓рдмреНрдз рд╣реЛ):</label>
                <input type="text" id="farmer_id" name="farmer_id" class="text-input" placeholder="рдЙрджрд╛. BR12345">
            </div>
            <!-- рдЖрдзрд╛рд░ рдирдВрдмрд░ + рдореЛрдмрд╛рдЗрд▓ (рдпрджрд┐ рдирд╣реАрдВ) -->
            <div id="aadhaar_block" class="other-row" style="flex-direction: column; align-items: stretch; gap: 0.8rem;">
                <div style="display: flex; align-items: center; gap: 0.8rem; flex-wrap: wrap;">
                    <label for="aadhaar_no">рдЖрдзрд╛рд░ рдирдВрдмрд░:</label>
                    <input type="text" id="aadhaar_no" name="aadhaar_no" class="text-input" placeholder="12 рдЕрдВрдХреЛрдВ рдХрд╛ рдЖрдзрд╛рд░ рдирдВрдмрд░" style="width: 280px;">
                </div>
                <div style="display: flex; align-items: center; gap: 0.8rem; flex-wrap: wrap;">
                    <label for="mobile_no">рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░:</label>
                    <input type="tel" id="mobile_no" name="mobile_no" class="text-input" placeholder="10 рдЕрдВрдХреЛрдВ рдХрд╛ рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░" style="width: 280px;">
                </div>
            </div>
        </fieldset>

        <!-- ========== рдЦреЗрддреА рдХреЗ рдкреНрд░рдХрд╛рд░ ========= -->
        <fieldset>
            <legend>ЁЯМ▒ рдЦреЗрддреА рдХреЗ рдкреНрд░рдХрд╛рд░</legend>
            <div class="section-label">тЦ╢ рдХрд┐рд╕ рдкреНрд░рдХрд╛рд░ рдХреА рдЦреЗрддреА рдХрд░рддреЗ рд╣реИрдВ? (рдХрдо рд╕реЗ рдХрдо рдПрдХ рдЪреБрдиреЗрдВ)</div>
            <div class="checkbox-grid" id="farmingCheckboxGroup">
                <label class="checkbox-item"><input type="checkbox" name="farming_type[]" value="рдзрд╛рди (paddy)"> рдзрд╛рди (paddy)</label>
                <label class="checkbox-item"><input type="checkbox" name="farming_type[]" value="рдЧреЗрд╣реВрдБ (wheat)"> рдЧреЗрд╣реВрдБ (wheat)</label>
                <label class="checkbox-item"><input type="checkbox" name="farming_type[]" value="рдордХреНрдХрд╛ (maize)"> рдордХреНрдХрд╛ (maize)</label>
                <label class="checkbox-item"><input type="checkbox" name="farming_type[]" value="рд╕рдмреНрдЬрд┐рдпрд╛рдБ (vegetables)"> рд╕рдмреНрдЬрд┐рдпрд╛рдБ</label>
                <label class="checkbox-item"><input type="checkbox" name="farming_type[]" value="рджрд╛рд▓реЗрдВ (pulses)"> рджрд╛рд▓реЗрдВ (рдорд╕реВрд░, рдЪрдирд╛)</label>
                <label class="checkbox-item"><input type="checkbox" name="farming_type[]" value="рдЧрдиреНрдирд╛ (sugarcane)"> рдЧрдиреНрдирд╛</label>
                <label class="checkbox-item"><input type="checkbox" name="farming_type[]" value="рдЖрд▓реВ (potato)"> рдЖрд▓реВ</label>
                <label class="checkbox-item"><input type="checkbox" name="farming_type[]" value="рддрд┐рд▓рд╣рди (oilseeds)"> рддрд┐рд▓рд╣рди (рд╕рд░рд╕реЛрдВ)</label>
                <label class="checkbox-item"><input type="checkbox" name="farming_type[]" value="рдлрд▓ (fruits)"> рдлрд▓ (рдЖрдо, рд▓реАрдЪреА)</label>
                <label class="checkbox-item"><input type="checkbox" id="farming_other_check" value="рдЕрдиреНрдп"> рдЕрдиреНрдп (Other)</label>
            </div>
            <div id="farming_other_row" class="other-row hidden">
                <label for="farming_other_text">рдХреГрдкрдпрд╛ рдЕрдиреНрдп рдЦреЗрддреА рдмрддрд╛рдПрдБ:</label>
                <input type="text" id="farming_other_text" name="farming_other" placeholder="рдЙрджрд╛. рдордЫрд▓реА рдкрд╛рд▓рди">
            </div>

            <div class="inline-hint">ЁЯдФ рдХреНрдпрд╛ рдЦреЗрддреА рдХреЗ рд▓рд┐рдП рдорджрдж рдЪрд╛рд╣рд┐рдП?</div>
            <div class="radio-group">
                <label class="radio-option"><input type="radio" name="help_farming" value="yes" id="help_farming_yes"> рд╣рд╛рдБ</label>
                <label class="radio-option"><input type="radio" name="help_farming" value="no" id="help_farming_no" checked> рдирд╣реАрдВ</label>
            </div>
            <div id="farming_help_type" class="help-type-group hidden">
                <label class="radio-option"><input type="radio" name="help_farming_type" value="training"> ЁЯСитАНЁЯМ╛ рдкреНрд░рд╢рд┐рдХреНрд╖рдг / рдЬрд╛рдирдХрд╛рд░реА</label>
                <label class="radio-option"><input type="radio" name="help_farming_type" value="equipment"> ЁЯЪЬ рдЙрдкрдХрд░рдг рдЙрдкрд▓рдмреНрдз рдХрд░рд╛рдирд╛</label>
            </div>
        </fieldset>

        <!-- ========== рдЙрд░реНрд╡рд░рдХ / рдЦрд╛рдж ========= -->
        <fieldset>
            <legend>ЁЯзк рдЙрд░реНрд╡рд░рдХ рдПрд╡рдВ рдЦрд╛рдж</legend>
            <div class="section-label">тЦ╢ рдХреМрди рд╕реА рдЦрд╛рдж / рдЙрд░реНрд╡рд░рдХ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░рддреЗ рд╣реИрдВ? (рдХрдо рд╕реЗ рдХрдо рдПрдХ рдЪреБрдиреЗрдВ)</div>
            <div class="checkbox-grid">
                <label class="checkbox-item"><input type="checkbox" name="fertilizer_type[]" value="рдпреВрд░рд┐рдпрд╛ (urea)"> рдпреВрд░рд┐рдпрд╛</label>
                <label class="checkbox-item"><input type="checkbox" name="fertilizer_type[]" value="рдбреАрдПрдкреА (DAP)"> рдбреАрдПрдкреА</label>
                <label class="checkbox-item"><input type="checkbox" name="fertilizer_type[]" value="рдкреЛрдЯрд╛рд╢ (potash)"> рдкреЛрдЯрд╛рд╢</label>
                <label class="checkbox-item"><input type="checkbox" name="fertilizer_type[]" value="рдПрдирдкреАрдХреЗ (NPK)"> рдПрдирдкреАрдХреЗ</label>
                <label class="checkbox-item"><input type="checkbox" name="fertilizer_type[]" value="рд╕рд┐рдВрдЧрд▓ рд╕реБрдкрд░ рдлреЙрд╕реНрдлреЗрдЯ (SSP)"> рд╕рд┐рдВрдЧрд▓ рд╕реБрдкрд░ рдлреЙрд╕реНрдлреЗрдЯ</label>
                <label class="checkbox-item"><input type="checkbox" name="fertilizer_type[]" value="рдЬрд┐рдВрдХ рд╕рд▓реНрдлреЗрдЯ"> рдЬрд┐рдВрдХ рд╕рд▓реНрдлреЗрдЯ</label>
                <label class="checkbox-item"><input type="checkbox" name="fertilizer_type[]" value="рдЧреЛрдмрд░ рдХреА рдЦрд╛рдж (compost)"> рдЧреЛрдмрд░ рдХреА рдЦрд╛рдж</label>
                <label class="checkbox-item"><input type="checkbox" name="fertilizer_type[]" value="рд╡рд░реНрдореА рдХрдореНрдкреЛрд╕реНрдЯ"> рд╡рд░реНрдореА рдХрдореНрдкреЛрд╕реНрдЯ</label>
                <label class="checkbox-item"><input type="checkbox" name="fertilizer_type[]" value="рд╣рд░реА рдЦрд╛рдж (green manure)"> рд╣рд░реА рдЦрд╛рдж</label>
                <label class="checkbox-item"><input type="checkbox" id="fertilizer_other_check" value="рдЕрдиреНрдп"> рдЕрдиреНрдп</label>
            </div>
            <div id="fertilizer_other_row" class="other-row hidden">
                <label for="fertilizer_other_text">рдЕрдиреНрдп рдЙрд░реНрд╡рд░рдХ/рдЦрд╛рдж рдХрд╛ рдирд╛рдо:</label>
                <input type="text" id="fertilizer_other_text" name="fertilizer_other" placeholder="рдЙрджрд╛. рдиреАрдо рдЦрд▓реА">
            </div>

            <div class="inline-hint">ЁЯдФ рдХреНрдпрд╛ рдЙрд░реНрд╡рд░рдХ/рдЦрд╛рдж рдХреЗ рд▓рд┐рдП рдорджрдж рдЪрд╛рд╣рд┐рдП?</div>
            <div class="radio-group">
                <label class="radio-option"><input type="radio" name="help_fertilizer" value="yes" id="help_fertilizer_yes"> рд╣рд╛рдБ</label>
                <label class="radio-option"><input type="radio" name="help_fertilizer" value="no" id="help_fertilizer_no" checked> рдирд╣реАрдВ</label>
            </div>
            <div id="fertilizer_help_type" class="help-type-group hidden">
                <label class="radio-option"><input type="radio" name="help_fertilizer_type" value="training"> ЁЯУШ рдкреНрд░рд╢рд┐рдХреНрд╖рдг (рд╕рд╣реА рдорд╛рддреНрд░рд╛/рдкреНрд░рдпреЛрдЧ)</label>
                <label class="radio-option"><input type="radio" name="help_fertilizer_type" value="equipment"> тЪЩя╕П рдЙрдкрдХрд░рдг / рдЦрд╛рдж рдЫрд┐рдбрд╝рдХрд╛рд╡ рдпрдВрддреНрд░</label>
            </div>
        </fieldset>

        <!-- ========== рдХреГрд╖рд┐ рдЙрдкрдХрд░рдг ========= -->
        <fieldset>
            <legend>ЁЯЪЬ рдХреГрд╖рд┐ рдЙрдкрдХрд░рдг</legend>
            <div class="section-label">тЦ╢ рдХреМрди рд╕реЗ рдЙрдкрдХрд░рдг рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ? (рдХрдо рд╕реЗ рдХрдо рдПрдХ рдЪреБрдиреЗрдВ)</div>
            <div class="checkbox-grid">
                <label class="checkbox-item"><input type="checkbox" name="equipment_used[]" value="рдЯреНрд░реИрдХреНрдЯрд░ (tractor)"> рдЯреНрд░реИрдХреНрдЯрд░</label>
                <label class="checkbox-item"><input type="checkbox" name="equipment_used[]" value="рдХрд▓реНрдЯреАрд╡реЗрдЯрд░ (cultivator)"> рдХрд▓реНрдЯреАрд╡реЗрдЯрд░</label>
                <label class="checkbox-item"><input type="checkbox" name="equipment_used[]" value="рд░реЛрдЯрд╛рд╡реЗрдЯрд░ (rotavator)"> рд░реЛрдЯрд╛рд╡реЗрдЯрд░</label>
                <label class="checkbox-item"><input type="checkbox" name="equipment_used[]" value="рд╕реАрдб рдбреНрд░рд┐рд▓ (seed drill)"> рд╕реАрдб рдбреНрд░рд┐рд▓</label>
                <label class="checkbox-item"><input type="checkbox" name="equipment_used[]" value="рд╕реНрдкреНрд░реЗрдпрд░ (sprayer)"> рд╕реНрдкреНрд░реЗрдпрд░ (рдХреАрдЯрдирд╛рд╢рдХ рдЫрд┐рдбрд╝рдХрд╛рд╡)</label>
                <label class="checkbox-item"><input type="checkbox" name="equipment_used[]" value="рдереНрд░реЗрд╢рд░ (thresher)"> рдереНрд░реЗрд╢рд░ (рдЧрд╣рд╛рдИ рдорд╢реАрди)</label>
                <label class="checkbox-item"><input type="checkbox" name="equipment_used[]" value="рд╣рд╛рд░реНрд╡реЗрд╕реНрдЯрд░ (harvester)"> рд╣рд╛рд░реНрд╡реЗрд╕реНрдЯрд░</label>
                <label class="checkbox-item"><input type="checkbox" name="equipment_used[]" value="рдкрдореНрдк рд╕реЗрдЯ (pump set)"> рдкрдореНрдк рд╕реЗрдЯ</label>
                <label class="checkbox-item"><input type="checkbox" name="equipment_used[]" value="рдбреНрд░рд┐рдк рдЗрд░рд┐рдЧреЗрд╢рди (drip)"> рдбреНрд░рд┐рдк рд╕рд┐рдВрдЪрд╛рдИ</label>
                <label class="checkbox-item"><input type="checkbox" id="equipment_other_check" value="рдЕрдиреНрдп"> рдЕрдиреНрдп</label>
            </div>
            <div id="equipment_other_row" class="other-row hidden">
                <label for="equipment_other_text">рдЕрдиреНрдп рдЙрдкрдХрд░рдг рдмрддрд╛рдПрдБ:</label>
                <input type="text" id="equipment_other_text" name="equipment_other" placeholder="рдЙрджрд╛. рдкреЙрд╡рд░ рдЯрд┐рд▓рд░">
            </div>

            <div class="inline-hint">ЁЯдФ рдХреНрдпрд╛ рдЙрдкрдХрд░рдгреЛрдВ рд╕реЗ рдЬреБрдбрд╝реА рдорджрдж рдЪрд╛рд╣рд┐рдП?</div>
            <div class="radio-group">
                <label class="radio-option"><input type="radio" name="help_equipment" value="yes" id="help_equipment_yes"> рд╣рд╛рдБ</label>
                <label class="radio-option"><input type="radio" name="help_equipment" value="no" id="help_equipment_no" checked> рдирд╣реАрдВ</label>
            </div>
            <div id="equipment_help_type" class="help-type-group hidden">
                <label class="radio-option"><input type="radio" name="help_equipment_type" value="training"> ЁЯЫая╕П рд╕рдВрдЪрд╛рд▓рди рдкреНрд░рд╢рд┐рдХреНрд╖рдг</label>
                <label class="radio-option"><input type="radio" name="help_equipment_type" value="equipment"> ЁЯЪЬ рдЙрдкрдХрд░рдг рджрд┐рд▓рд╡рд╛рдиреЗ рдореЗрдВ рдорджрдж</label>
            </div>
        </fieldset>

        <!-- ========== рдЪреБрдиреМрддрд┐рдпрд╛рдБ ========= -->
        <fieldset class="challenge-box">
            <legend>тЪая╕П рд╡рд░реНрддрдорд╛рди рдЪреБрдиреМрддрд┐рдпрд╛рдБ</legend>
            <div class="section-label">тЦ╢ рдХрд┐рд╕рд╛рди рдХреЛ рдХрд┐рди рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рд╕рд╛рдордирд╛ рд╣реИ? (рдХрдо рд╕реЗ рдХрдо рдПрдХ рдЪреБрдиреЗрдВ)</div>
            <div class="checkbox-grid">
                <label class="checkbox-item"><input type="checkbox" name="challenges[]" value="рдкрд╛рдиреА рдХреА рдХрдореА"> ЁЯТз рдкрд╛рдиреА рдХреА рдХрдореА</label>
                <label class="checkbox-item"><input type="checkbox" name="challenges[]" value="рдХреАрдЯ рдПрд╡рдВ рд░реЛрдЧ"> ЁЯРЫ рдХреАрдЯ рдПрд╡рдВ рд░реЛрдЧ</label>
                <label class="checkbox-item"><input type="checkbox" name="challenges[]" value="рдЙрд░реНрд╡рд░рдХ рдХреА рдХрдореА/рдорд╣рдВрдЧрд╛рдИ"> ЁЯзк рдЙрд░реНрд╡рд░рдХ рдХреА рдХрдореА / рдорд╣рдВрдЧрд╛рдИ</label>
                <label class="checkbox-item"><input type="checkbox" name="challenges[]" value="рдлрд╕рд▓реЛрдВ рдХреЗ рдЙрдЪрд┐рдд рджрд╛рдо рди рдорд┐рд▓рдирд╛"> ЁЯТ░ рдлрд╕рд▓реЛрдВ рдХреЗ рдЙрдЪрд┐рдд рджрд╛рдо рди рдорд┐рд▓рдирд╛</label>
                <label class="checkbox-item"><input type="checkbox" name="challenges[]" value="рдореМрд╕рдо рдХреА рдорд╛рд░ (рдмрд╛рдврд╝/рд╕реВрдЦрд╛)"> ЁЯМзя╕П рдореМрд╕рдо рдХреА рдорд╛рд░ (рдмрд╛рдврд╝/рд╕реВрдЦрд╛)</label>
                <label class="checkbox-item"><input type="checkbox" name="challenges[]" value="рдХрд░реНрдЬ рдХрд╛ рдмреЛрдЭ"> ЁЯУЙ рдХрд░реНрдЬ рдХрд╛ рдмреЛрдЭ</label>
                <label class="checkbox-item"><input type="checkbox" name="challenges[]" value="рдЬрд╛рдирдХрд╛рд░реА/рдкреНрд░рд╢рд┐рдХреНрд╖рдг рдХрд╛ рдЕрднрд╛рд╡"> ЁЯУЪ рдЬрд╛рдирдХрд╛рд░реА/рдкреНрд░рд╢рд┐рдХреНрд╖рдг рдХрд╛ рдЕрднрд╛рд╡</label>
                <label class="checkbox-item"><input type="checkbox" name="challenges[]" value="рдЙрдкрдХрд░рдгреЛрдВ рдХреА рдХрдореА"> ЁЯФз рдЙрдкрдХрд░рдгреЛрдВ рдХреА рдХрдореА</label>
                <label class="checkbox-item"><input type="checkbox" id="challenge_other_check" value="рдЕрдиреНрдп"> рдЕрдиреНрдп рд╕рдорд╕реНрдпрд╛</label>
            </div>
            <div id="challenge_other_row" class="other-row hidden">
                <label for="challenge_other_text">рдХреГрдкрдпрд╛ рдЕрдиреНрдп рд╕рдорд╕реНрдпрд╛ рдмрддрд╛рдПрдБ:</label>
                <input type="text" id="challenge_other_text" name="challenge_other" placeholder="рдЬреИрд╕реЗ рдмреАрдЬ рдХреА рдЕрдиреБрдкрд▓рдмреНрдзрддрд╛">
            </div>
        </fieldset>

        <hr>
        <button type="button" class="button" id="submitForm">ЁЯУЛ рдХрд┐рд╕рд╛рди рдЬрд╛рдирдХрд╛рд░реА рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВ</button>
        <div id="formStatus" class="note"></div>
    </form>
</div>

<script>
    (function(){
        // ----- рдкрд╣рдЪрд╛рди рдЯреЙрдЧрд▓ (Farmer ID vs Aadhaar + Mobile) -----
        const hasIdYes = document.getElementById('has_id_yes');
        const hasIdNo = document.getElementById('has_id_no');
        const farmerIdBlock = document.getElementById('farmer_id_block');
        const aadhaarBlock = document.getElementById('aadhaar_block');

        function toggleIdAadhaar() {
            if (hasIdYes.checked) {
                farmerIdBlock.classList.remove('hidden');
                aadhaarBlock.classList.add('hidden');
                document.getElementById('aadhaar_no').value = '';
                document.getElementById('mobile_no').value = '';
            } else {
                farmerIdBlock.classList.add('hidden');
                aadhaarBlock.classList.remove('hidden');
                document.getElementById('farmer_id').value = '';
            }
        }

        hasIdYes.addEventListener('change', toggleIdAadhaar);
        hasIdNo.addEventListener('change', toggleIdAadhaar);
        toggleIdAadhaar();

        // ----- рд╕рд╣рд╛рдпрддрд╛ рдЯреЙрдЧрд▓ (help yes/no) -----
        const farmingHelpYes = document.getElementById('help_farming_yes');
        const farmingHelpNo = document.getElementById('help_farming_no');
        const farmingHelpType = document.getElementById('farming_help_type');

        const fertHelpYes = document.getElementById('help_fertilizer_yes');
        const fertHelpNo = document.getElementById('help_fertilizer_no');
        const fertHelpType = document.getElementById('fertilizer_help_type');

        const equipHelpYes = document.getElementById('help_equipment_yes');
        const equipHelpNo = document.getElementById('help_equipment_no');
        const equipHelpType = document.getElementById('equipment_help_type');

        function toggleFarmingHelp() { farmingHelpType.classList.toggle('hidden', !farmingHelpYes.checked); }
        function toggleFertHelp() { fertHelpType.classList.toggle('hidden', !fertHelpYes.checked); }
        function toggleEquipHelp() { equipHelpType.classList.toggle('hidden', !equipHelpYes.checked); }

        farmingHelpYes.addEventListener('change', toggleFarmingHelp);
        farmingHelpNo.addEventListener('change', toggleFarmingHelp);
        fertHelpYes.addEventListener('change', toggleFertHelp);
        fertHelpNo.addEventListener('change', toggleFertHelp);
        equipHelpYes.addEventListener('change', toggleEquipHelp);
        equipHelpNo.addEventListener('change', toggleEquipHelp);

        // рдЖрд░рдВрднрд┐рдХ рд╕реНрдерд┐рддрд┐ (рд╕рднреА help no checked)
        farmingHelpType.classList.add('hidden');
        fertHelpType.classList.add('hidden');
        equipHelpType.classList.add('hidden');

        // ----- рдЕрдиреНрдп (other) рдлреАрд▓реНрдб рдЯреЙрдЧрд▓ -----
        const farmingOtherCheck = document.getElementById('farming_other_check');
        const farmingOtherRow = document.getElementById('farming_other_row');
        const fertilizerOtherCheck = document.getElementById('fertilizer_other_check');
        const fertilizerOtherRow = document.getElementById('fertilizer_other_row');
        const equipOtherCheck = document.getElementById('equipment_other_check');
        const equipOtherRow = document.getElementById('equipment_other_row');
        const challengeOtherCheck = document.getElementById('challenge_other_check');
        const challengeOtherRow = document.getElementById('challenge_other_row');

        function toggleOther(checkbox, row) {
            row.classList.toggle('hidden', !checkbox.checked);
            if (!checkbox.checked) {
                const textInput = row.querySelector('input[type="text"]');
                if (textInput) textInput.value = '';
            }
        }

        farmingOtherCheck.addEventListener('change', () => toggleOther(farmingOtherCheck, farmingOtherRow));
        fertilizerOtherCheck.addEventListener('change', () => toggleOther(fertilizerOtherCheck, fertilizerOtherRow));
        equipOtherCheck.addEventListener('change', () => toggleOther(equipOtherCheck, equipOtherRow));
        challengeOtherCheck.addEventListener('change', () => toggleOther(challengeOtherCheck, challengeOtherRow));

        farmingOtherRow.classList.add('hidden');
        fertilizerOtherRow.classList.add('hidden');
        equipOtherRow.classList.add('hidden');
        challengeOtherRow.classList.add('hidden');

        // ========== рд╕рдмрдорд┐рдЯ рд╣реИрдВрдбрд▓рд░ тАУ рдЕрдм Google Sheets / Webhook рдкрд░ рднреЗрдЬреЗрдЧрд╛ ==========
        const submitBtn = document.getElementById('submitForm');
        const statusDiv = document.getElementById('formStatus');

        // тЪая╕П IMPORTANT: рдЗрд╕ URL рдХреЛ рдЕрдкрдиреЗ Zapier / Make / sheet.best / Apps Script рд╡реЗрдмрд╣реБрдХ URL рд╕реЗ рдмрджрд▓реЗрдВ
        const WEBHOOK_URL = 'https://script.google.com/macros/s/AKfycbx0M88xmN1Pw560eRwvbn55ucaH7vTrQwBuWSVXRpe6cEake1wC5vq0ON26q8epml5fnw/exec';  // тЖР рдпрд╣рд╛рдБ рдЕрдкрдирд╛ рд╡реЗрдмрд╣реБрдХ рдбрд╛рд▓реЗрдВ

        // ----- рд╡реИрд▓рд┐рдбреЗрд╢рди рдлрдВрдХреНрд╢рди (рд╕рднреА рджрд┐рдЦрдиреЗ рд╡рд╛рд▓реЗ рдлреАрд▓реНрдб рдЕрдирд┐рд╡рд╛рд░реНрдп) -----
        function validateVisibleFields() {
            const form = document.getElementById('farmerForm');
            const elements = form.elements;
            const errors = [];

            // рд╕рдореВрд╣ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдСрдмреНрдЬреЗрдХреНрдЯ (рд░реЗрдбрд┐рдпреЛ рдФрд░ рдЪреЗрдХрдмреЙрдХреНрд╕ рдХреЗ рд▓рд┐рдП)
            const groups = {};

            // рдкрд╣рд▓реЗ рд╕рднреА рдПрд▓рд┐рдореЗрдВрдЯреНрд╕ рдХреЛ рдЙрдирдХреЗ рдирд╛рдо рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЧреНрд░реБрдк рдХрд░реЗрдВ
            for (let el of elements) {
                if (!el.name) continue; // рдмрд┐рдирд╛ рдирд╛рдо рд╡рд╛рд▓реЗ рдПрд▓рд┐рдореЗрдВрдЯ рдХреЛ рдЗрдЧреНрдиреЛрд░ рдХрд░реЗрдВ

                // рдЪреЗрдХ рдХрд░реЗрдВ рдХрд┐ рдПрд▓рд┐рдореЗрдВрдЯ рджрд┐рдЦ рд░рд╣рд╛ рд╣реИ рдпрд╛ рдирд╣реАрдВ (рдЙрд╕рдХреЗ рдХрд┐рд╕реА рдкреЗрд░реЗрдВрдЯ рдореЗрдВ hidden class рди рд╣реЛ)
                let isVisible = true;
                let parent = el;
                while (parent && parent !== form) {
                    if (parent.classList && parent.classList.contains('hidden')) {
                        isVisible = false;
                        break;
                    }
                    parent = parent.parentElement;
                }
                if (!isVisible) continue;

                // рдЕрдЧрд░ рджрд┐рдЦ рд░рд╣рд╛ рд╣реИ рддреЛ рдЧреНрд░реБрдк рдореЗрдВ рдРрдб рдХрд░реЗрдВ
                if (!groups[el.name]) {
                    groups[el.name] = [];
                }
                groups[el.name].push(el);
            }

            // рд╣рд░ рдЧреНрд░реБрдк рдХреЛ рд╡реИрд▓рд┐рдбреЗрдЯ рдХрд░реЗрдВ
            for (let groupName in groups) {
                const group = groups[groupName];
                const firstEl = group[0];

                // рд░реЗрдбрд┐рдпреЛ рдмрдЯрди рдХрд╛ рдЧреНрд░реБрдк
                if (firstEl.type === 'radio') {
                    const checked = group.some(r => r.checked);
                    if (!checked) {
                        errors.push(`рдХреГрдкрдпрд╛ "${getLabelForField(groupName)}" рдХрд╛ рдЪрдпрди рдХрд░реЗрдВред`);
                    }
                }
                // рдЪреЗрдХрдмреЙрдХреНрд╕ рдХрд╛ рдЧреНрд░реБрдк (рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ)
                else if (firstEl.type === 'checkbox') {
                    // рд╕рд┐рд░реНрдл рдЙрди рдЪреЗрдХрдмреЙрдХреНрд╕ рдЧреНрд░реБрдк рдХреЛ рд╡реИрд▓рд┐рдбреЗрдЯ рдХрд░реЗрдВ рдЬрд┐рдирдореЗрдВ рдХрдо рд╕реЗ рдХрдо рдПрдХ рдЪреЗрдХ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП
                    // рд╣рдо рдорд╛рдиреЗрдВрдЧреЗ рдХрд┐ рд╣рд░ рдЪреЗрдХрдмреЙрдХреНрд╕ рдЧреНрд░реБрдк (рдЬреИрд╕реЗ farming_type[]) рдореЗрдВ рдХрдо рд╕реЗ рдХрдо рдПрдХ рдЪреЗрдХ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП
                    // рдЕрдкрд╡рд╛рдж: "рдЕрдиреНрдп" рдЪреЗрдХрдмреЙрдХреНрд╕ рдЕрд▓рдЧ рд╕реЗ рд╣реИрдВрдбрд▓ рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗ (рд╡реЗ рднреА рдЗрд╕реА рдЧреНрд░реБрдк рдореЗрдВ рд╣реИрдВ)
                    // рд▓реЗрдХрд┐рди "рдЕрдиреНрдп" рдЪреЗрдХрдмреЙрдХреНрд╕ рдХрд╛ рдирд╛рдо рдЕрд▓рдЧ рд╣реИ? рдирд╣реАрдВ, farming_other_check рдХрд╛ рдирд╛рдо рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдпрд╣ рдЧреНрд░реБрдк рдореЗрдВ рдирд╣реАрдВ рдЖрдПрдЧрд╛ред
                    // рддреЛ рд╕рднреА checkbox groups (рдЬреИрд╕реЗ farming_type[]) mandatory рд╣реИрдВред
                    const checked = group.some(cb => cb.checked);
                    if (!checked) {
                        errors.push(`рдХреГрдкрдпрд╛ "${getLabelForField(groupName)}" рдореЗрдВ рдХрдо рд╕реЗ рдХрдо рдПрдХ рд╡рд┐рдХрд▓реНрдк рдЪреБрдиреЗрдВред`);
                    }
                }
                // рдЯреЗрдХреНрд╕реНрдЯ, рдЯреЗрд▓, рдЖрджрд┐ рдЗрдирдкреБрдЯ
                else if (firstEl.type === 'text' || firstEl.type === 'tel' || firstEl.tagName === 'TEXTAREA' || firstEl.type === 'number') {
                    // рд╕рд┐рд░реНрдл рд╡рд╣реА рдЯреЗрдХреНрд╕реНрдЯ рдлреАрд▓реНрдб рдЬреЛ рджрд┐рдЦ рд░рд╣реЗ рд╣реИрдВ рдФрд░ рдЬрд┐рдирдХрд╛ рдирд╛рдо рд╣реИ (рдЬреИрд╕реЗ farmer_id, aadhaar_no, mobile_no, рдЖрджрд┐)
                    const value = firstEl.value.trim();
                    if (value === '') {
                        errors.push(`рдХреГрдкрдпрд╛ "${getLabelForField(groupName)}" рднрд░реЗрдВред`);
                    }
                }
                // рдЕрдиреНрдп рдЯрд╛рдЗрдк (hidden, submit) рдХреЛ рдЗрдЧреНрдиреЛрд░ рдХрд░реЗрдВ
            }

            // рд╡рд┐рд╢реЗрд╖ рдХреЗрд╕: "рдЕрдиреНрдп" рдЪреЗрдХрдмреЙрдХреНрд╕ рдХреЗ рд╕рд╛рде рдЖрдиреЗ рд╡рд╛рд▓реЗ рдЯреЗрдХреНрд╕реНрдЯ рдлреАрд▓реНрдб
            const otherChecks = [
                { check: farmingOtherCheck, text: document.getElementById('farming_other_text'), label: 'рдЕрдиреНрдп рдЦреЗрддреА' },
                { check: fertilizerOtherCheck, text: document.getElementById('fertilizer_other_text'), label: 'рдЕрдиреНрдп рдЙрд░реНрд╡рд░рдХ' },
                { check: equipOtherCheck, text: document.getElementById('equipment_other_text'), label: 'рдЕрдиреНрдп рдЙрдкрдХрд░рдг' },
                { check: challengeOtherCheck, text: document.getElementById('challenge_other_text'), label: 'рдЕрдиреНрдп рд╕рдорд╕реНрдпрд╛' }
            ];

            for (let item of otherChecks) {
                if (item.check && item.check.checked) {
                    // рдЪреЗрдХ рдХрд░реЗрдВ рдХрд┐ рдЯреЗрдХреНрд╕реНрдЯ рдлреАрд▓реНрдб рджрд┐рдЦ рд░рд╣рд╛ рд╣реИ (рд╣реЛрдЧрд╛) рдФрд░ рдЦрд╛рд▓реА рдирд╣реАрдВ
                    if (item.text && item.text.value.trim() === '') {
                        errors.push(`рдХреГрдкрдпрд╛ "${item.label}" рдХрд╛ рд╡рд┐рд╡рд░рдг рднрд░реЗрдВред`);
                    }
                }
            }

            return errors;
        }

        // рд╣реЗрд▓реНрдкрд░: рдлреАрд▓реНрдб рдХреЗ рдирд╛рдо рд╕реЗ рд▓реЗрдмрд▓ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП (рдмрд╕ рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдореИрдкрд┐рдВрдЧ)
        function getLabelForField(name) {
            const labels = {
                'has_id': 'рдХрд┐рд╕рд╛рди рдЖрдИрдбреА рд╡рд┐рдХрд▓реНрдк',
                'farmer_id': 'рдХрд┐рд╕рд╛рди рдЖрдИрдбреА',
                'aadhaar_no': 'рдЖрдзрд╛рд░ рдирдВрдмрд░',
                'mobile_no': 'рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░',
                'farming_type[]': 'рдЦреЗрддреА рдХреЗ рдкреНрд░рдХрд╛рд░',
                'help_farming': 'рдЦреЗрддреА рдореЗрдВ рдорджрдж',
                'help_farming_type': 'рдЦреЗрддреА рдорджрдж рдХрд╛ рдкреНрд░рдХрд╛рд░',
                'fertilizer_type[]': 'рдЙрд░реНрд╡рд░рдХ рдХреЗ рдкреНрд░рдХрд╛рд░',
                'help_fertilizer': 'рдЙрд░реНрд╡рд░рдХ рдореЗрдВ рдорджрдж',
                'help_fertilizer_type': 'рдЙрд░реНрд╡рд░рдХ рдорджрдж рдХрд╛ рдкреНрд░рдХрд╛рд░',
                'equipment_used[]': 'рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рдкреНрд░рдХрд╛рд░',
                'help_equipment': 'рдЙрдкрдХрд░рдг рдореЗрдВ рдорджрдж',
                'help_equipment_type': 'рдЙрдкрдХрд░рдг рдорджрдж рдХрд╛ рдкреНрд░рдХрд╛рд░',
                'challenges[]': 'рдЪреБрдиреМрддрд┐рдпрд╛рдБ'
            };
            return labels[name] || name;
        }

        submitBtn.addEventListener('click', async function() {
            // рд╕рдмрдорд┐рдЯ рдмрдЯрди рдХреЛ disable рдХрд░реЗрдВ рдФрд░ рд╕реНрдЯреЗрдЯрд╕ рджрд┐рдЦрд╛рдПрдБ
            submitBtn.disabled = true;
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'тП│ рдЬрд╛рдБрдЪ рд╣реЛ рд░рд╣реА рд╣реИ...';
            statusDiv.innerHTML = '';

            // рдкрд╣рд▓реЗ рд╡реИрд▓рд┐рдбреЗрд╢рди рдХрд░реЗрдВ
            const validationErrors = validateVisibleFields();
            if (validationErrors.length > 0) {
                statusDiv.innerHTML = `<div class="validation-error">тЭМ рдХреГрдкрдпрд╛ рд╕рднреА рдЖрд╡рд╢реНрдпрдХ рдлреАрд▓реНрдб рднрд░реЗрдВ:<br>${validationErrors.join('<br>')}</div>`;
                submitBtn.disabled = false;
                submitBtn.textContent = originalText;
                return;
            }

            // рдЕрдм рдЕрд╕рд▓реА рд╕рдмрдорд┐рдЯ
            submitBtn.textContent = 'тП│ рднреЗрдЬрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ...';
            const form = document.getElementById('farmerForm');
            const formData = new FormData(form);

            try {
                const response = await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    body: formData
                });

                let result = {};
                const contentType = response.headers.get('content-type');
                if (contentType && contentType.includes('application/json')) {
                    result = await response.json();
                } else {
                    result.message = await response.text();
                }

                if (response.ok) {
                    statusDiv.innerHTML = '<div class="success-message">тЬЕ рдбреЗрдЯрд╛ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рд╕рд╣реЗрдЬрд╛ рдЧрдпрд╛! рдЕрдм рдЖрдк рдЕрдЧрд▓реЗ рдХрд┐рд╕рд╛рди рдХреЗ рд▓рд┐рдП рдлреЙрд░реНрдо рднрд░ рд╕рдХрддреЗ рд╣реИрдВред</div>';
                    
                    form.reset();

                    // рд╕рднреА рдбрд╛рдпрдирд╛рдорд┐рдХ рд╕реЗрдХреНрд╢рди рдХреЛ рд░реАрд╕реЗрдЯ рдХрд░реЗрдВ
                    document.getElementById('has_id_no').checked = true;
                    toggleIdAadhaar();

                    document.getElementById('help_farming_no').checked = true;
                    document.getElementById('help_fertilizer_no').checked = true;
                    document.getElementById('help_equipment_no').checked = true;
                    
                    farmingHelpType.classList.add('hidden');
                    fertHelpType.classList.add('hidden');
                    equipHelpType.classList.add('hidden');

                    [farmingOtherCheck, fertilizerOtherCheck, equipOtherCheck, challengeOtherCheck].forEach(cb => {
                        cb.checked = false;
                        const rowId = cb.id.replace('_check', '_row');
                        const row = document.getElementById(rowId);
                        toggleOther(cb, row);
                    });

                } else {
                    statusDiv.innerHTML = `<div class="error-message">тЭМ рддреНрд░реБрдЯрд┐: ${result.message || 'рдХреБрдЫ рдЧрд▓рдд рд╣реЛ рдЧрдпрд╛'}</div>`;
                }
            } catch (error) {
                console.error(error);
                statusDiv.innerHTML = `<div class="error-message">тЭМ рдиреЗрдЯрд╡рд░реНрдХ рддреНрд░реБрдЯрд┐: ${error.message}</div>`;
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = originalText;
            }
        });
    })();
</script>
</body>
</html>
